(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],[,,,,,,,,,,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){"use strict";s.r(t);var a=s(0),n=s(1),i=s.n(n),r=s(4),c=s.n(r),u=(s(10),s(2)),d=function(e){for(var t=e.length-1;t>0;t--){var s=Math.floor(Math.random()*(t+1)),a=[e[s],e[t]];e[t]=a[0],e[s]=a[1]}return e},o=(s(11),[["Carrier",5],["Battleship",4],["Cruiser",3],["Submarine",3],["Destroyer",2]]),l=["A1","B1","C1","D1","E1","F1","A2","B2","C2","D2","E2","F2","A3","B3","C3","D3","E3","F3","A4","B4","C4","D4","E4","F4","A5","B5","C5","D5","E5","F5","A6","B6","C6","D6","E6","F6"],h=function(){var e=function(){return 0===Math.floor(Math.random()*Math.floor(2))?"horizontal":"vertical"},t=function(e,t){var s,a=[];for(s=0;s<=30;s+=t)a.push(e.slice(s,s+t));return a},s=function(e,t){for(var s=[],a=0;a<t;a++){var n=[e[a],e[a+6],e[a+2*t],e[a+3*t],e[a+4*t],e[a+5*t]];s.push(n)}return s},a=function(e,t,s){var a=[],n=t-s,i=null;return e.forEach((function(e){for(var t=0;t<=n;t++)(i=e.slice(t,t+s)).includes(o[0][0])||i.includes(o[1][0])||i.includes(o[2][0])||i.includes(o[3][0])||i.includes(o[4][0])||a.push(i)})),a};return{getOrientation:e,getRows:t,getColumns:s,getAvailable:a,getCoordinates:function(n,i){var r="horizontal"===e()?t(n,6):s(n,6),c=a(r,6,i),u=d(c.slice()).shift(),o={};return u.forEach((function(e){o[e]=!1})),o},markGrid:function(e,t,s){for(var a=function(a){var n=e.findIndex((function(e){return e===t[a]}));e[n]=s},n=0;n<t.length;n++)a(n);return e.slice()},updateTargets:function(e,t,s){var a=e.findIndex((function(e){return e===s}));return e[a]=t?"hit":"miss",e.slice()},isHit:function(e,t){var s=e.findIndex((function(e){return Object.keys(e.coordinates).includes(t)}));return-1===s?{hit:!1,index:null}:{hit:!0,index:s}}}}(),j=function(e){var t=Object(n.useState)(l),s=Object(u.a)(t,2),i=s[0],r=s[1],c=Object(n.useState)([]),j=Object(u.a)(c,2),f=j[0],b=j[1],m=function(){var e=l.slice(),t=[];d(o),o.forEach((function(s){var a=s[0],n=s[1],i=h.getCoordinates(e,n),r=function(e,t){return{type:e,coordinates:t,hit:function(e){this.coordinates[e]=!0},isSunk:function(){return Object.values(this.coordinates).every((function(e){return!0===e}))}}}(a,i);t.push(r),e=h.markGrid(e,Object.keys(i),a)})),b(t)},p=function(t){var s=h.isHit(f,t);if(s.hit){var a=f[s.index];a.hit(t),a.isSunk()?e.action({type:"sunk",payload:{target:a.type,status:f}}):e.action({type:"hit",payload:{target:a.type,status:f}})}else e.action({type:"miss"});r(h.updateTargets(i.slice(),s.hit,t)),window.setTimeout(e.action,3e3,{type:"turnOver"})},v=i.map((function(e,t){return Object(a.jsx)("button",{className:t,"data-coordinate":e,children:e},e.toString()+t)}));return Object(n.useEffect)((function(){m()}),[]),Object(n.useEffect)((function(){!function(){var t=[];f.forEach((function(e){!0===e.isSunk()&&t.push(!0)})),5===t.length&&e.action({type:"gameover"})}()})),e.isVisible?Object(a.jsx)("div",{className:"gameboard",children:Object(a.jsx)("div",{className:"grid active",onClick:function(t){t.preventDefault();var s=t.currentTarget,a=t.target.dataset.coordinate;a&&(s.classList.add("animate"),e.action({type:"attack",payload:a}),window.setTimeout(p,1e3,a))},children:v})}):Object(a.jsx)("div",{className:"gameboard",children:Object(a.jsx)("div",{className:"grid hidden",children:v})})},f=(s(12),s.p+"static/media/hit.f24389d3.gif"),b=s.p+"static/media/waves.20d4f15e.gif",m=s.p+"static/media/sunk.0dbfaa92.gif",p=function(e){return e.message.includes("HIT")?Object(a.jsxs)("div",{className:"Message topLevel",children:[Object(a.jsx)("h1",{children:e.message}),Object(a.jsx)("img",{src:f,alt:"hit"})]}):e.message.includes("MISS")?Object(a.jsxs)("div",{className:"Message topLevel",children:[Object(a.jsx)("h1",{children:e.message}),Object(a.jsx)("img",{src:b,alt:"waves"})]}):e.message.includes("SUNK")?Object(a.jsxs)("div",{className:"Message topLevel",children:[Object(a.jsx)("h1",{children:e.message}),Object(a.jsx)("img",{src:m,alt:"sunk"})]}):Object(a.jsx)("div",{className:"Message",children:Object(a.jsx)("h1",{children:e.message})})},v=(s(13),function(e){var t,s,n;switch(e.message){case"Let's play Battleship!":t="startScreen",s="shieldDismissed",n="READY!";break;case"Game over!":t="gameOver",s="playAgain",n="PLAY AGAIN";break;default:t="Shield",s="shieldDismissed",n="READY!"}return e.isUp?Object(a.jsxs)("div",{className:t,children:[Object(a.jsx)("h1",{children:e.message}),Object(a.jsx)("button",{onClick:function(){e.action({type:s})},children:n})]}):null}),g=(s(14),function(e){var t=Object(n.useState)(e.status),s=Object(u.a)(t,2),i=s[0],r=s[1],c=Object(n.useState)(e.status),d=Object(u.a)(c,2),o=d[0],l=d[1];Object(n.useEffect)((function(){1===e.player?r(e.status):l(e.status)}),[e.player]);var h=i.map((function(t,s){var n=Object.values(t.coordinates).map((function(t,s){return Object(a.jsx)("div",{"data-hit":t.toString()},t.toString()+s+e.player)}));return Object(a.jsx)("div",{className:"ship","data-ship":t.type,children:Object(a.jsxs)("div",{className:"status",children:[Object(a.jsx)("h1",{className:"type",children:t.type}),Object(a.jsx)("div",{className:"hits",children:n})]})},t.toString()+s+e.player)})),j=o.map((function(t,s){var n=Object.values(t.coordinates).map((function(t,s){return Object(a.jsx)("div",{"data-hit":t.toString()},t.toString()+(s+5)+(e.player+1))}));return Object(a.jsx)("div",{className:"ship","data-ship":t.type,children:Object(a.jsx)("div",{className:"status",children:Object(a.jsx)("div",{className:"hits",children:n})})},t.toString()+(s+5)+(e.player+1))}));return Object(a.jsxs)("div",{className:"Score",children:[Object(a.jsxs)("div",{id:"x",children:[Object(a.jsx)("label",{children:"Player 1"}),h]}),Object(a.jsxs)("div",{id:"y",children:[Object(a.jsx)("label",{children:"Player 2"}),j]})]})}),O=(s(15),{message:"Let's play Battleship!",status:[{type:"Carrier",coordinates:{1:!1,2:!1,3:!1,4:!1,5:!1}},{type:"Battleship",coordinates:{1:!1,2:!1,3:!1,4:!1}},{type:"Cruiser",coordinates:{1:!1,2:!1,3:!1}},{type:"Submarine",coordinates:{1:!1,2:!1,3:!1}},{type:"Destroyer",coordinates:{1:!1,2:!1}}],turn:1,shielded:!0});function y(e){return e}var x=function(e,t){switch(t.type){case"turnOver":var s=1===e.turn?2:1;return{message:"Ready Player "+s+"?",status:e.status,turn:s,shielded:!0};case"shieldDismissed":return{message:"Awaiting your command...",status:e.status,turn:e.turn,shielded:!1};case"attack":return{message:"Launching attack on "+t.payload+" ...",status:e.status,turn:e.turn,shielded:!1};case"hit":return{message:t.payload.target+" HIT!",status:t.payload.status,turn:e.turn,shielded:!1};case"miss":return{message:"Attack was a MISS!",status:e.status,turn:e.turn,shielded:!1};case"sunk":return{message:t.payload.target+" SUNK!",status:t.payload.status,turn:e.turn,shielded:!1};case"gameover":return{message:"Game Over! Ready to play again?",status:e.status,turn:e.turn,shielded:!0};case"playAgain":return O;default:throw new Error}};function S(){var e=Object(n.useReducer)(x,O,y),t=Object(u.a)(e,2),s=t[0],i=t[1],r=1===s.turn;return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(v,{isUp:s.shielded,message:s.message,action:i}),Object(a.jsx)(p,{message:s.message}),Object(a.jsx)(j,{isVisible:r,id:"x",action:i}),Object(a.jsx)(j,{isVisible:!r,id:"y",action:i}),Object(a.jsx)(g,{status:s.status,player:s.turn})]})}c.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(S,{})}),document.getElementById("root"))}],[[16,1,2]]]);
//# sourceMappingURL=main.cc6e6290.chunk.js.map